/* Base container */
.image-container.progressive {
  position: relative;
  width: 100%;
  overflow: hidden;
}

/* Skeleton shimmer while low-res hasn't loaded yet */
.image-container.progressive.loading {
  background: #f0f0f0;
}
.image-container.progressive.loading::after {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(90deg, rgba(240,240,240,0) 0%, rgba(225,225,225,0.9) 50%, rgba(240,240,240,0) 100%);
  animation: shimmer 1.2s infinite;
}

@keyframes shimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

/* Shared img styles */
.image-container.progressive img {
  display: block;
  width: 100%;
  border-radius: 12px;
}

/* Low-res preview layer */
.image-container .preview {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  filter: blur(18px) saturate(140%);
  transform: scale(1.05);
  opacity: 0;
  transition: opacity 0.4s ease;
  background: #eee;
}

.image-container .preview.preview-loaded {
  opacity: 1;
}

/* Final high-res image */
.image-container .final-image {
  position: relative;
  width: 100%;
  height: auto;
  opacity: 0;
  transition: opacity 0.5s ease;
}

.image-container .final-image.final-visible {
  opacity: 1;
}

/* Fade out preview when high-res visible */
.image-container .final-image.final-visible + .preview,
.image-container .preview.preview-loaded.final-hide {
  opacity: 0;
  transition: opacity 0.6s ease;
}
